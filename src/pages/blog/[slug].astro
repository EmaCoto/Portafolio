---
import Layout from "../../layouts/Layout.astro";
import { getCollection, type CollectionEntry } from "astro:content";

export async function getStaticPaths() {
  const posts: CollectionEntry<"blog">[] = await getCollection("blog");

  return posts
    .filter((p) => !p.data.draft)
    .map((post) => ({
      params: { slug: post.slug },
      props: { post },
    }));
}

const { post } = Astro.props as { post: CollectionEntry<"blog"> };
const { Content } = await post.render();
---

<Layout title={`${post.data.title} | Blog`}>
  <section class="max-w-3xl mx-auto px-6 py-20">
    <a href="/blog/" class="text-white/70 hover:text-white">‚Üê Volver al Blog</a>

    <h1 class="mt-6 text-3xl md:text-4xl font-bold text-white">{post.data.title}</h1>

    <p class="mt-2 text-white/60 text-sm">
      {post.data.pubDate.toLocaleDateString("es-ES", { year: "numeric", month: "long", day: "2-digit" })}
    </p>

    <div class="prose prose-invert max-w-none mt-10">
      <Content />
    </div>
  </section>
</Layout>
